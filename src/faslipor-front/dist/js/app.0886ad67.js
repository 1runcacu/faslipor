(function(){var e={9023:function(e,t,o){"use strict";var n=o(9242),i=(o(7658),o(3396));function l(e,t){return(0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(200,(e=>(0,i._)("div",{class:"snow",key:e}))),64)}var s=o(89);const r={},a=(0,s.Z)(r,[["render",l]]);var u=a,c=o(2483),d=o(65),f={__name:"App",setup(e){const t=(0,i.FN)().appContext.config.globalProperties,o=(0,i.f3)("socket"),n=(0,c.tv)(),l=(0,d.oR)();return o.on("message",((e={})=>{console.log("message:",e),t.$message(e)})),o.on("asset",((e={})=>{console.log("asset:",e);const{event:o,state:n,data:i}=e;if(200===n)switch(o){case"list":l.commit("setRooms",e.data);break;default:t.$message({message:"事件异常!!!",type:"error"})}else t.$message({message:"服务端异常!!!",type:"error"})})),o.on("redirect",((e={})=>{console.log("redirect:",e),l.commit("setParams",e.params),n.push({path:e.path})})),(e,t)=>{const o=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(u),(0,i.Wm)(o)],64)}}};const p=f;var h=p,m=o(4870),g=o(7139),v=o(6871),w=o(7366),y=o(2748);const b={class:"wrapper"},x={class:"input-data"},_=(0,i._)("div",{class:"underline"},null,-1);function k(e,t,o,l,s,r){return(0,i.wg)(),(0,i.iD)("div",b,[(0,i._)("div",x,[(0,i.wy)((0,i._)("input",{type:"text",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>r.buffer=e)},null,512),[[n.nr,r.buffer]]),_,(0,i._)("label",null,(0,g.zw)(o.hint),1)])])}var W={data(){return{buf:""}},computed:{buffer:{get:function(){return this.buf},set:function(e){this.buf=e||"",this.$emit("input",e||"")}}},props:{value:String,hint:{type:String,default:""}},mounted(){this.buf=this.value}};const S=(0,s.Z)(W,[["render",k]]);var C=S;const z=e=>((0,i.dD)("data-v-270d061c"),e=e(),(0,i.Cn)(),e),H={key:0,class:"drag-dialog ban-select-font",ref:"dragWin"},T=z((()=>(0,i._)("div",{style:{"margin-left":"auto"}},null,-1)));function $(e,t,o,l,s,r){const a=(0,i.up)("Minus"),u=(0,i.up)("el-icon"),c=(0,i.up)("FullScreen"),d=(0,i.up)("Close"),f=(0,i.Q2)("drag"),p=(0,i.Q2)("resize");return(0,i.wg)(),(0,i.j4)(n.uT,{name:"drag-win"},{default:(0,i.w5)((()=>[o.closeShow?(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",H,[(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{class:"drag-bar",style:(0,g.j5)(o.headStyle)},[(0,i.WI)(e.$slots,"head",{},void 0,!0),T,(0,i.Wm)(u,{onClick:r.closehandle},{default:(0,i.w5)((()=>[(0,i.Wm)(a)])),_:1},8,["onClick"]),o.resizeAble?((0,i.wg)(),(0,i.j4)(u,{key:0,onClick:r.fullScreen},{default:(0,i.w5)((()=>[(0,i.Wm)(c)])),_:1},8,["onClick"])):(0,i.kq)("",!0),(0,i.Wm)(u,{class:"close",onClick:r.closehandle},{default:(0,i.w5)((()=>[(0,i.Wm)(d)])),_:1},8,["onClick"])],4)),[[f,o.dragAble]]),(0,i._)("div",{class:"drag-main",style:(0,g.j5)(o.mainStyle)},[(0,i.WI)(e.$slots,"default",{},void 0,!0)],4)])),[[p,o.resizeAble]]):(0,i.kq)("",!0)])),_:3})}var P=o(1015);const j={width:0,height:0,top:0,left:0,fill:!1};let O=null;const U={name:"win-ui",components:{ElIcon:P.gn,FullScreen:y.ITT,Close:y.x8P,Minus:y.WF_},props:{width:{type:String,default:"500px"},height:{type:String,default:"40vh"},headHeight:{type:String,default:"35px"},headStyle:{type:String,default:""},mainStyle:{type:String,default:""},resizeAble:{type:Boolean,default:!0},dragAble:{type:Boolean,default:!0},closeShow:{type:Boolean,default:!0},fullShow:{type:Boolean,default:!0}},mounted(){O=this.$refs["dragWin"]},methods:{fullScreen(){const e=O,t=O.style;t.width&&"100vw"===t.width||(j.fill=!1),j.fill?(t.width=`${j.width}px`,t.height=`${j.height}px`,t.top=`${j.top}px`,t.left=`${j.left}px`):(j.width=e.offsetWidth,j.height=e.offsetHeight,j.top=e.offsetTop,j.left=e.offsetLeft,t.width="100vw",t.height="100vh",t.top="0px",t.left="0px"),j.fill=!j.fill},closehandle(){this.$emit("close",!0)}}},I=()=>{(0,n.sj)((e=>({"741a269f":e.width,15489924:e.height,c941ec24:e.headHeight})))},D=U.setup;U.setup=D?(e,t)=>(I(),D(e,t)):I;var E=U;const R=(0,s.Z)(E,[["render",$],["__scopeId","data-v-270d061c"]]);var A=R;const F=e=>((0,i.dD)("data-v-d4faecec"),e=e(),(0,i.Cn)(),e),B={id:"box"},Y={id:"card"},Z={id:"rooms"},q={class:"card-header"},L={style:{"font-size":"0.2rem"}},M={id:"Room"},X=F((()=>(0,i._)("div",null,[(0,i._)("b",null,"房间创建")],-1)));var K={__name:"app-index",setup(e){const t=(0,i.FN)().appContext.config.globalProperties,o=(0,m.iH)(""),n=(0,m.iH)(1),l=(0,m.iH)(1);let s="FASLIPOR",r="";const a=(0,m.iH)(!0),u=(0,i.f3)("socket"),f=(0,d.oR)(),p=(0,m.iH)(!1),h=()=>{p.value=!1},b=(0,c.tv)();let x=(0,m.iH)(!1);const _=e=>s="string"===typeof e?e:"",k=e=>r="string"===typeof e?e:"",W=e=>{v.T.confirm("确定加入此房间?","",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((t=>{console.log(e),b.push({name:"panel"})})).catch((()=>{}))},S=()=>{p.value=!0},z=()=>{""!=s?v.T.confirm(`确定创建【${s}】?`,"",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((e=>{x.value=!1,u.emit("query",{event:"add",params:{roomName:s,description:r}})})).catch((()=>{})):t.$message({message:"房间名称不为空",type:"error"})};let H=(0,i.Fl)((()=>{let e=o.value,t=RegExp(e),i=f.state.rooms.filter((o=>!e||t.test(o.name))),s=7*(l.value-1);return n.value=Math.floor(i.length/7*10),i.slice(s,s+7)}));return(0,i.bv)((()=>{u.emit("query",{event:"list"}),x.value=!0})),(e,t)=>{const s=(0,i.up)("el-input"),r=(0,i.up)("el-button"),u=(0,i.up)("el-card"),c=(0,i.up)("el-icon"),d=(0,i.up)("el-form"),f=(0,i.Q2)("drag");return(0,i.wg)(),(0,i.iD)("div",B,[(0,i._)("div",Y,[(0,i.Wm)(s,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),class:"w-50 m-2",size:"large",placeholder:"房间搜索","suffix-icon":(0,m.SU)(y.olm),style:{width:"300px"}},null,8,["modelValue","suffix-icon"]),(0,i._)("div",Z,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,m.SU)(H),((e,t)=>((0,i.wg)(),(0,i.j4)(u,{"body-style":{height:"100%"},class:(0,g.C_)({disabled:!e.state||e.stats>=e.limit}),key:t,disabled:!e.state||e.stats>=e.limit},{header:(0,i.w5)((()=>[(0,i._)("div",q,[(0,i._)("span",null,[(0,i._)("b",null,(0,g.zw)(e.name),1),(0,i._)("div",L,"["+(0,g.zw)(e.stats)+"/"+(0,g.zw)(e.limit)+"]",1)]),e.state&&e.stats<e.limit?((0,i.wg)(),(0,i.j4)(r,{key:0,type:"success",class:"button",text:"",onClick:t=>W(e.description)},{default:(0,i.w5)((()=>[(0,i.Uk)("进入")])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])])),default:(0,i.w5)((()=>[(0,i._)("div",M,"     "+(0,g.zw)(e.description+e.description+e.description+e.description),1)])),_:2},1032,["class","disabled"])))),128)),(0,i.Wm)(u,{"body-style":{height:"100%"}},{default:(0,i.w5)((()=>[(0,i._)("div",{id:"addRoom",onClick:S},[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)((0,m.SU)(y.v37))])),_:1})])])),_:1})]),(0,i.Wm)((0,m.SU)(w.R),{background:"",layout:"prev, pager, next",total:n.value,"current-page":l.value,"onUpdate:current-page":t[1]||(t[1]=e=>l.value=e)},null,8,["total","current-page"])]),(0,i.Wm)(A,{resizeAble:!1,onClose:h,closeShow:p.value,width:"30vh",height:"30vh"},{head:(0,i.w5)((()=>[X])),default:(0,i.w5)((()=>[(0,i.wy)(((0,i.wg)(),(0,i.j4)(d,{class:"form"},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{value:"FASLIPOR",onInput:_,hint:"房间名称"}),(0,i.Wm)(C,{onInput:k,hint:"房间简介"}),(0,i.Wm)(r,{disabled:!(0,m.SU)(x),onClick:z},{default:(0,i.w5)((()=>[(0,i.Uk)("快捷创建")])),_:1},8,["disabled"])])),_:1})),[[f,a.value]])])),_:1},8,["closeShow"])])}}};const N=(0,s.Z)(K,[["__scopeId","data-v-d4faecec"]]);var V=N,Q=o(5478),G=o(7968);const J=e=>((0,i.dD)("data-v-3989885f"),e=e(),(0,i.Cn)(),e),ee={id:"box"},te={class:"header"},oe=J((()=>(0,i._)("span",{class:"text-large font-600 mr-3"}," 房间名称 ",-1))),ne=J((()=>(0,i._)("div",null,null,-1))),ie=J((()=>(0,i._)("div",{class:"body"},[(0,i._)("div",{class:"left"}),(0,i._)("canvas",{id:"canvas",class:"right"})],-1)));var le={__name:"app-panel",setup(e){const t=(0,c.tv)(),o=()=>{t.go(-1)};(0,m.iH)(1e3),(0,m.iH)(1e3);function n(){const e=new G.fabric.Canvas("canvas");let t=new G.fabric.Circle({left:200,top:200,radius:50}),o=new G.fabric.Gradient({type:"linear",gradientUnits:"pixels",coords:{x1:0,y1:0,x2:t.width,y2:0},colorStops:[{offset:0,color:"red"},{offset:.2,color:"orange"},{offset:.4,color:"yellow"},{offset:.6,color:"green"},{offset:.8,color:"blue"},{offset:1,color:"purple"}]});t.set("fill",o),e.add(t),e.add(new G.fabric.Circle({left:100,top:100,radius:50,fill:"gray"})),e.add(new G.fabric.Circle({left:200,top:100,radius:50,fill:"blue"})),e.add(new G.fabric.Circle({left:100,top:200,radius:30,fill:"red"})),e.add(new G.fabric.Triangle({width:20,height:30,fill:"blue",left:50,top:50})),e.setWidth(window.innerWidth-100),e.setHeight(window.innerHeight-83),window.onresize=(e=>function(){e.setWidth(window.innerWidth-100),e.setHeight(window.innerHeight-83)})(e)}return(0,i.bv)((()=>{n()})),(e,t)=>{const n=(0,i.up)("el-icon");return(0,i.wg)(),(0,i.iD)("div",ee,[(0,i._)("div",te,[(0,i.Wm)((0,m.SU)(Q.Xh),{onBack:o},{content:(0,i.w5)((()=>[oe])),icon:(0,i.w5)((()=>[(0,i.Wm)(n,{class:"back"},{default:(0,i.w5)((()=>[(0,i.Wm)((0,m.SU)(y.XdH))])),_:1})])),title:(0,i.w5)((()=>[ne])),_:1})]),ie])}}};const se=(0,s.Z)(le,[["__scopeId","data-v-3989885f"]]);var re=se;const ae=[{name:"index",path:"/",component:V},{name:"panel",path:"/panel",component:re}],ue=(0,c.p7)({history:(0,c.PO)(),routes:ae});ue.beforeEach(((e,t,o)=>{"panel"===e.name?t&&"index"===t.name?o():o({name:"index"}):o()}));var ce=ue;const de={state:{info:{rid:"",uid:""},params:{},rooms:[]},mutations:{setParams(e,t={}){e.params=t},setRooms(e,t=[]){e.rooms=t}},actions:{},getters:{},modules:{}};var fe=(0,d.MT)(de),pe=o(70),he=o(6666),me=o(1565),ge=o(3614),ve=o(970),we=o(4143),ye=o(9866);o(4415);const be="http://localhost:8101",xe="ws://127.0.0.1:8102";var _e={APIURL:be,SOCKET:xe},ke=o(993),We=o.n(ke),Se={install:(e,{connection:t,options:o})=>{const n=We()(t,o);e.config.globalProperties.$socket=n,e.provide("socket",n)}};const Ce=function(e,t){var o;return function(){var n=this,i=arguments;o&&clearTimeout(o),o=setTimeout((function(){e.apply(n,i)}),t)}};const ze={drag:{mounted(e,t){if(!t.value&&""!==(t.value??""))return;const o=e.parentNode;e.onmousedown=e=>{o.style.zIndex=1,e=e||window.event;const t=e.pageX,n=e.pageY,i=o.offsetLeft,l=o.offsetTop,s=document.documentElement.clientWidth,r=o.clientWidth,a=s-r,u=document.documentElement.clientHeight,c=o.clientHeight,d=u-c;document.onmousemove=e=>{const s=e.pageX,r=e.pageY;let u=s-t+i,c=r-n+l;u<0&&(u=0),u>a&&(u=a),c<0&&(c=0),c>d&&(c=d),u<3&&(u=0),c<3&&(c=0),o.style.left=u+"px",o.style.top=c+"px",o.style.marginLeft=0,o.style.marginTop=0},document.onmouseup=()=>{document.onmousemove=null}}}},resize:{mounted(e,t){if(!t.value&&""!==(t.value??""))return;e.name="resize";const o={top:"n-resize",bottom:"s-resize",left:"w-resize",right:"e-resize",topright:"ne-resize",topleft:"nw-resize",bottomleft:"sw-resize",bottomright:"se-resize"},n={width:0,height:0,top:0,left:0,x:0,y:0,dir:""},i=e=>{let t="";const o=e.offsetX,n=e.offsetY,i=8;return n<i?t+="top":n>e.toElement.clientHeight-i&&(t+="bottom"),o<i?t+="left":o>e.toElement.clientWidth-i&&(t+="right"),t},l=(e,t)=>[t.x-e.x,t.y-e.y],s=()=>{n.width=0,n.height=0,n.top=0,n.left=0,n.x=0,n.y=0,n.dir="",document.onmousemove=null},r=t=>{const[o,i]=l({x:n.x,y:n.y},{x:t.pageX,y:t.pageY}),s=n.width+o,r=n.width-o,a=n.height+i,u=n.height-i,c=200,d=200,f=()=>{if(u<=d)return;let t=n.top+i;t>=0?(e.style.height=u+"px",e.style.top=t+"px"):e.style.top="0px"},p=()=>{e.style.height=a+"px"},h=()=>{if(r<=c)return;let t=n.left+o;t>=0?(e.style.left=t+"px",e.style.width=r+"px"):e.style.left="0px"},m=()=>{e.style.width=s+"px"},g={top:f,bottom:p,left:h,right:m,topright:()=>{f(),m()},topleft:()=>{f(),h()},bottomleft:()=>{p(),h()},bottomright:()=>{p(),m()}};g[n.dir]()};e.onmousedown=t=>{if("resize"!==t.target.name)return;let l=i(t);o[l]&&(n.width=e.clientWidth,n.height=e.clientHeight,n.top=e.offsetTop,n.left=e.offsetLeft,n.x=t.pageX,n.y=t.pageY,n.dir=l,document.onmousemove=r),document.onmouseup=s};const a=Ce((t=>{if(t.preventDefault(),e.style.cursor="default","resize"!==t.target.name)return;let n=i(t);e.style.cursor=o[n]||"default"}),0);e.onmousemove=a}}};var He=e=>{Object.entries(ze).forEach((([t,o])=>{e.directive(t,o)}))};const Te=(0,n.ri)(h);Te.config.globalProperties.$axios=pe.ZP,Te.config.globalProperties.$app_config=_e,Te.config.globalProperties.$log=he.bM,Te.config.globalProperties.$message=me.z8,pe.ZP.defaults.headers.common["Content-Type"]="application/json;charset=UTF-8",He(Te),Te.use(ce).use(fe).use(ge.mi).use(P.gn).use(ve.Mr).use(we.Kf).use(ye.EZ).use(Se,{connection:xe,options:{query:"userName=test&appKey=test&roomId=rabbit",transports:["websocket"]}}).mount("#app")},7020:function(){},4960:function(){},6759:function(){},6272:function(){}},t={};function o(n){var i=t[n];if(void 0!==i)return i.exports;var l=t[n]={exports:{}};return e[n](l,l.exports,o),l.exports}o.m=e,function(){var e=[];o.O=function(t,n,i,l){if(!n){var s=1/0;for(c=0;c<e.length;c++){n=e[c][0],i=e[c][1],l=e[c][2];for(var r=!0,a=0;a<n.length;a++)(!1&l||s>=l)&&Object.keys(o.O).every((function(e){return o.O[e](n[a])}))?n.splice(a--,1):(r=!1,l<s&&(s=l));if(r){e.splice(c--,1);var u=i();void 0!==u&&(t=u)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[n,i,l]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,l,s=n[0],r=n[1],a=n[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(i in r)o.o(r,i)&&(o.m[i]=r[i]);if(a)var c=a(o)}for(t&&t(n);u<s.length;u++)l=s[u],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(c)},n=self["webpackChunkfaslipor_front"]=self["webpackChunkfaslipor_front"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(9023)}));n=o.O(n)})();
//# sourceMappingURL=app.0886ad67.js.map